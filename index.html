<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8" />
    <title>Lantern Multi-Part</title>
    <style>
        body { margin: 0; overflow: hidden; }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/STLLoader.js"></script>
    <script>
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 100;
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        const ambient = new THREE.AmbientLight(0xffffff, 0.8);
        scene.add(ambient);

        const yellowLight = new THREE.PointLight(0xffff00, 20, 30); 
        yellowLight.position.set(0, 0, 0); 
        scene.add(yellowLight); 

        // --- 立體光暈 ---
        const glowGeometry = new THREE.SphereGeometry(6, 32, 32);
        const glowMaterial = new THREE.MeshBasicMaterial({
            color: 0xffff00,
            transparent: true,
            opacity: 0.2
        });
        const glowMesh = new THREE.Mesh(glowGeometry, glowMaterial);
        glowMesh.position.copy(yellowLight.position);
        scene.add(glowMesh);

        const mat_zhezhou = new THREE.MeshLambertMaterial({
            color: 0xff0000,
            transparent: true,
            opacity: 0.6
        });
        const mat_diaosheng = new THREE.MeshLambertMaterial({
            color: 0x4b2e0f,
            transparent: false
        });
        const mat_liusu = new THREE.MeshPhongMaterial({
            color: 0xffd700,
            shininess: 100,
            specular: 0xffffff
        });
        const mat_yuanpan = new THREE.MeshStandardMaterial({
            color: 0x222222,
            roughness: 0.6,
            metalness: 0.3
        });
        const mat_zhuzi = new THREE.MeshPhongMaterial({
            color: 0x8b0000,
            shininess: 80,
            specular: 0xffcccc
        });
        const mat_zhuziUP = new THREE.MeshPhongMaterial({
            color: 0x8b0000,
            shininess: 80,
            specular: 0xffcccc
        });
        const mat_liusuxian = new THREE.MeshLambertMaterial({
            color: 0x4b2e0f,
            transparent: false
        });


        const parts = [
            { file: 'model/FinalProject_zhezhou.stl', material: mat_zhezhou, isZhezhou: true },
            { file: 'model/FinalProject_diaosheng.stl', material: mat_diaosheng },
            { file: 'model/FinalProject_liusu.stl', material: mat_liusu },
            { file: 'model/FinalProject_yuanpan.stl', material: mat_yuanpan },
            { file: 'model/FinalProject_zhuzi.stl', material: mat_zhuzi },
            { file: 'model/FinalProject_zhuziUP.stl', material: mat_zhuziUP },
            { file: 'model/FinalProject_liusuxian.stl', material: mat_liusuxian }
        ];

        
const group = new THREE.Group();
scene.add(group);


const loader = new THREE.STLLoader();

        
let loadedCount = 0;
let meshes = [];

        
parts.forEach((part, idx) => {
    loader.load(part.file, function (geometry) {
    const mesh = new THREE.Mesh(geometry, part.material);
    mesh.position.set(0, 0, 10); 
    mesh.scale.set(0.1, 0.1, 0.1);
    group.add(mesh);
    meshes[idx] = mesh;
    //loadedCount++;
    //if (loadedCount === parts.length) {
    //    centerGroupToWorld();
   //}
        });
    });


        
function animate() {
    requestAnimationFrame(animate);
    group.rotation.y += 0.01;
    meshes.forEach(mesh => {
        if (mesh.position.z > 0) mesh.position.z -= 0.05;
        if (mesh.scale.x < 1) {
            mesh.scale.x += 0.01;
            mesh.scale.y += 0.01;
            mesh.scale.z += 0.01;
        }
    });
   renderer.render(scene, camera);
}
animate();
        
window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
